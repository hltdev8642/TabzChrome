---
description: "Generate pmux-style prompts for beads issues. Analyzes issues, explores codebase, and outputs worker-ready prompts."
---

# Draft Prompts - Issue-to-Prompt Generation

Generate comprehensive, worker-ready prompts for beads issues using the prompt-drafter agent.

## Quick Start

```bash
# Draft prompts for ready issues
/conductor:draft-prompts

# Draft for specific issues
/conductor:draft-prompts TabzChrome-abc TabzChrome-xyz
```

## Workflow Overview

```
1. Get issues           ->  bd ready (or specified IDs)
2. For each issue       ->  Task(prompt-drafter)
3. Collect prompts      ->  Store for worker spawning
4. Output               ->  Display or save to file
```

---

## Step 1: Get Target Issues

```bash
# If no issues specified, get ready issues
bd ready --json | jq -r '.[].id' | head -5
```

---

## Step 2: Draft Prompts with Subagent

For each issue, spawn the prompt-drafter:

```
Task(
  subagent_type="conductor:prompt-drafter",
  model="haiku",
  prompt="Draft worker prompt for issue <ISSUE_ID>"
)
```

The prompt-drafter will:
1. Read issue details from beads
2. Explore codebase for relevant files
3. Match skills to issue type
4. Generate comprehensive prompt

---

## Step 3: Collect and Display

Present prompts in a table:

```markdown
## Generated Prompts

| Issue | Type | Skills | Files |
|-------|------|--------|-------|
| abc | bug | xterm-js | Terminal.tsx, pty-handler.js |
| xyz | feature | ui-styling | SettingsModal.tsx |

### TabzChrome-abc

<collapsed prompt preview>
...first 10 lines...
</collapsed>

### TabzChrome-xyz

<collapsed prompt preview>
...first 10 lines...
</collapsed>
```

---

## Step 4: Output Options

**Option A: Display for Copy**
Show prompts ready for manual copy into tmux send-keys.

**Option B: Save to Files**
```bash
mkdir -p .prompts/wave-$(date +%Y%m%d)
# Save each prompt as .prompts/wave-YYYYMMDD/<issue-id>.md
```

**Option C: Direct to bd-swarm**
Pass prompts directly to `/conductor:bd-swarm` for spawning.

---

## Skill Matching Reference

The prompt-drafter matches issues to skills:

| Label/Keyword | Skills Triggered | Worker Type |
|---------------|------------------|-------------|
| terminal, xterm, resize, pty | xterm-js | worker-terminal |
| ui, component, modal, dashboard | ui-styling, frontend-design | worker-frontend |
| backend, api, server, websocket | backend-development | worker-backend |
| mcp, browser, screenshot | tabz-mcp | worker-browser |
| general, refactor, docs | none | worker-minimal |

---

## Example Output

```
## Draft Prompts for Wave 2026-01-08

### TabzChrome-t5r (bug, P1)
**Skills:** xterm-js
**Files:** Terminal.tsx, useTerminalSessions.ts

<details>
<summary>View prompt (45 lines)</summary>

## Context
Terminal resize events can corrupt text display...

## Issue
- ID: TabzChrome-t5r
- Title: Fix terminal resize causes text corruption
...

</details>

---

### TabzChrome-k9x (feature, P2)
**Skills:** ui-styling, web-frameworks
**Files:** SettingsModal.tsx, sidepanel.css

<details>
<summary>View prompt (52 lines)</summary>

## Context
Adding dark mode toggle to settings...
...

</details>

---

## Summary
- 2 prompts generated
- Ready for: `/conductor:bd-swarm TabzChrome-t5r TabzChrome-k9x`
```

---

## Integration with bd-swarm

After drafting, the prompts can be used by bd-swarm:

```bash
# Option 1: Manual - review prompts, then swarm
/conductor:draft-prompts TabzChrome-abc TabzChrome-xyz
# Review output...
/conductor:bd-swarm TabzChrome-abc TabzChrome-xyz

# Option 2: Direct pipe (auto mode)
# bd-swarm internally calls draft-prompts if prompts not provided
/conductor:bd-swarm --auto
```

---

## Notes

- Prompts are generated by Haiku (fast, cheap) via prompt-drafter agent
- Each prompt includes @ file references for target Claude to read
- Skill hints are natural language triggers, not explicit invocations
- Prompts end with `/conductor:worker-done <issue-id>` completion command
